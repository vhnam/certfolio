---
import { AwardIcon, LinkIcon, BookIcon, CheckIcon } from "@lucide/astro";
import type { Certificate } from "@/models/certificate";

const { certificate } = Astro.props as { certificate: Certificate };
const { title, description, link, completed, certificateUrl, completedDate } =
  certificate || {};

const expectedColor = completed ? "green-500" : "gray-500";
---

<div
  class="group relative flex flex-col overflow-hidden rounded-xl border-2 border-border/60 bg-card transition-all duration-300 hover:border-primary/60 hover:shadow-2xl hover:shadow-primary/10 hover:-translate-y-1"
>
  <div
    class="flex items-center justify-center bg-gradient-to-br from-secondary/80 to-primary/5 p-10 relative overflow-hidden"
  >
    <div
      class="absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(22,163,74,0.06)_0%,transparent_70%)] opacity-0 group-hover:opacity-100 transition-opacity duration-500"
    >
    </div>

    <div
      class={`relative flex size-28 items-center justify-center rounded-full border-[3px] shadow-lg transition-all duration-500 group-hover:scale-110 group-hover:rotate-12 group-hover:shadow-xl border-${expectedColor} bg-${expectedColor}10 text-${expectedColor}`}
    >
      <AwardIcon
        class={`size-14 transition-transform duration-500 group-hover:scale-110 text-${expectedColor}`}
      />
    </div>
  </div>

  <div class="flex flex-1 flex-col p-6">
    <h3
      class="mb-3 text-xl font-bold text-foreground leading-tight group-hover:text-primary transition-colors duration-200"
    >
      {title}
    </h3>

    <p class="mb-4 flex-1 text-sm text-muted-foreground line-clamp-2">
      {description}
    </p>

    <div class="mb-5 flex items-center gap-2">
      {
        completed && (
          <span class="inline-flex items-center gap-1.5 rounded-full bg-green-500/10 px-3 py-1.5 text-xs font-semibold text-green-500 ring-1 ring-primary/20">
            <CheckIcon class="size-3.5" />
            Completed
          </span>
        )
      }
      {
        !completed && (
          <span class="inline-flex items-center gap-1.5 rounded-full bg-muted px-3 py-1.5 text-xs font-semibold text-muted-foreground ring-1 ring-border">
            <BookIcon class="size-3.5" />
            In Progress
          </span>
        )
      }
      {
        completedDate && (
          <span class="text-xs font-medium text-muted-foreground">
            {completedDate}
          </span>
        )
      }
    </div>

    <div class="flex flex-col gap-2.5 sm:flex-row">
      <a
        href={link}
        target="_blank"
        rel="noopener noreferrer"
        class="flex flex-1 items-center justify-center gap-2 rounded-lg bg-primary px-4 py-2.5 text-sm font-semibold text-primary-foreground shadow-md shadow-primary/20 transition-all duration-200 hover:bg-primary/90 hover:shadow-lg hover:shadow-primary/30 hover:scale-105 active:scale-100"
      >
        View Notes
        <LinkIcon class="size-4" />
      </a>
      {
        certificateUrl && (
          <a
            href={certificateUrl}
            target="_blank"
            rel="noopener noreferrer"
            class={`flex items-center justify-center gap-2 rounded-lg border-2 border-${expectedColor} bg-${expectedColor}/10 px-4 py-2.5 text-sm font-semibold text-${expectedColor} transition-all duration-200 hover:border-${expectedColor} hover:bg-${expectedColor}/20 hover:text-${expectedColor}`}
          >
            Certificate
          </a>
        )
      }
    </div>
  </div>
</div>
